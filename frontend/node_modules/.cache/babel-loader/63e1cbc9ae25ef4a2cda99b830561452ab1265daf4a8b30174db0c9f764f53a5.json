{"ast":null,"code":"/**\n * PetCareApp - Komponent ProtectedRoute\n * Ochrona tras przed nieautoryzowanym dostępem\n * @author VS\n */import React from'react';import{Navigate,useLocation}from'react-router-dom';import{useAuth}from'../../context/AuthContext';import LoadingSpinner from'./LoadingSpinner';/**\n * Komponent chroniący trasy wymagające autoryzacji\n * @param {Object} props - Właściwości\n * @param {React.ReactNode} props.children - Komponenty dzieci\n * @param {Array<string>} props.allowedRoles - Dozwolone role\n */import{jsx as _jsx}from\"react/jsx-runtime\";function ProtectedRoute(_ref){let{children,allowedRoles=[]}=_ref;const{user,isLoading,isAuthenticated}=useAuth();const location=useLocation();// Oczekiwanie na sprawdzenie sesji - VS\nif(isLoading){return/*#__PURE__*/_jsx(LoadingSpinner,{fullScreen:true});}// Brak autoryzacji - przekierowanie do logowania - VS\nif(!isAuthenticated){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",state:{from:location},replace:true});}// Sprawdzenie roli użytkownika - VS\nif(allowedRoles.length>0&&!allowedRoles.includes(user.role)){// Przekierowanie do właściwego dashboardu - VS\nconst dashboardPaths={'client':'/dashboard/client','vet':'/dashboard/vet','admin':'/dashboard/admin','it':'/dashboard/it'};const correctPath=dashboardPaths[user.role]||'/';return/*#__PURE__*/_jsx(Navigate,{to:correctPath,replace:true});}// Dostęp przyznany - VS\nreturn children;}export default ProtectedRoute;","map":{"version":3,"names":["React","Navigate","useLocation","useAuth","LoadingSpinner","jsx","_jsx","ProtectedRoute","_ref","children","allowedRoles","user","isLoading","isAuthenticated","location","fullScreen","to","state","from","replace","length","includes","role","dashboardPaths","correctPath"],"sources":["C:/Users/Viliam/Desktop/petcareapp-final/petcareapp/frontend/src/components/common/ProtectedRoute.js"],"sourcesContent":["/**\n * PetCareApp - Komponent ProtectedRoute\n * Ochrona tras przed nieautoryzowanym dostępem\n * @author VS\n */\n\nimport React from 'react';\nimport { Navigate, useLocation } from 'react-router-dom';\nimport { useAuth } from '../../context/AuthContext';\nimport LoadingSpinner from './LoadingSpinner';\n\n/**\n * Komponent chroniący trasy wymagające autoryzacji\n * @param {Object} props - Właściwości\n * @param {React.ReactNode} props.children - Komponenty dzieci\n * @param {Array<string>} props.allowedRoles - Dozwolone role\n */\nfunction ProtectedRoute({ children, allowedRoles = [] }) {\n    const { user, isLoading, isAuthenticated } = useAuth();\n    const location = useLocation();\n\n    // Oczekiwanie na sprawdzenie sesji - VS\n    if (isLoading) {\n        return <LoadingSpinner fullScreen />;\n    }\n\n    // Brak autoryzacji - przekierowanie do logowania - VS\n    if (!isAuthenticated) {\n        return <Navigate to=\"/login\" state={{ from: location }} replace />;\n    }\n\n    // Sprawdzenie roli użytkownika - VS\n    if (allowedRoles.length > 0 && !allowedRoles.includes(user.role)) {\n        // Przekierowanie do właściwego dashboardu - VS\n        const dashboardPaths = {\n            'client': '/dashboard/client',\n            'vet': '/dashboard/vet',\n            'admin': '/dashboard/admin',\n            'it': '/dashboard/it'\n        };\n\n        const correctPath = dashboardPaths[user.role] || '/';\n        return <Navigate to={correctPath} replace />;\n    }\n\n    // Dostęp przyznany - VS\n    return children;\n}\n\nexport default ProtectedRoute;\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,GAEA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,CAAEC,WAAW,KAAQ,kBAAkB,CACxD,OAASC,OAAO,KAAQ,2BAA2B,CACnD,MAAO,CAAAC,cAAc,KAAM,kBAAkB,CAE7C;AACA;AACA;AACA;AACA;AACA,GALA,OAAAC,GAAA,IAAAC,IAAA,yBAMA,QAAS,CAAAC,cAAcA,CAAAC,IAAA,CAAkC,IAAjC,CAAEC,QAAQ,CAAEC,YAAY,CAAG,EAAG,CAAC,CAAAF,IAAA,CACnD,KAAM,CAAEG,IAAI,CAAEC,SAAS,CAAEC,eAAgB,CAAC,CAAGV,OAAO,CAAC,CAAC,CACtD,KAAM,CAAAW,QAAQ,CAAGZ,WAAW,CAAC,CAAC,CAE9B;AACA,GAAIU,SAAS,CAAE,CACX,mBAAON,IAAA,CAACF,cAAc,EAACW,UAAU,MAAE,CAAC,CACxC,CAEA;AACA,GAAI,CAACF,eAAe,CAAE,CAClB,mBAAOP,IAAA,CAACL,QAAQ,EAACe,EAAE,CAAC,QAAQ,CAACC,KAAK,CAAE,CAAEC,IAAI,CAAEJ,QAAS,CAAE,CAACK,OAAO,MAAE,CAAC,CACtE,CAEA;AACA,GAAIT,YAAY,CAACU,MAAM,CAAG,CAAC,EAAI,CAACV,YAAY,CAACW,QAAQ,CAACV,IAAI,CAACW,IAAI,CAAC,CAAE,CAC9D;AACA,KAAM,CAAAC,cAAc,CAAG,CACnB,QAAQ,CAAE,mBAAmB,CAC7B,KAAK,CAAE,gBAAgB,CACvB,OAAO,CAAE,kBAAkB,CAC3B,IAAI,CAAE,eACV,CAAC,CAED,KAAM,CAAAC,WAAW,CAAGD,cAAc,CAACZ,IAAI,CAACW,IAAI,CAAC,EAAI,GAAG,CACpD,mBAAOhB,IAAA,CAACL,QAAQ,EAACe,EAAE,CAAEQ,WAAY,CAACL,OAAO,MAAE,CAAC,CAChD,CAEA;AACA,MAAO,CAAAV,QAAQ,CACnB,CAEA,cAAe,CAAAF,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}