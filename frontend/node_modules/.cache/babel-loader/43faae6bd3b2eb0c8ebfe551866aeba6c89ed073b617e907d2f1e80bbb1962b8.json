{"ast":null,"code":"/**\n * PetCareApp - Serwis API\n * Główny moduł do komunikacji z mikroserwisami backendu\n * @author VS\n */import axios from'axios';// Konfiguracja bazowych URL dla mikroserwisów - VS\nconst API_CONFIG={AUTH_SERVICE:process.env.REACT_APP_AUTH_SERVICE_URL||'http://localhost:8001/api/v1',USER_SERVICE:process.env.REACT_APP_USER_SERVICE_URL||'http://localhost:8002/api/v1',MEDICAL_SERVICE:process.env.REACT_APP_MEDICAL_SERVICE_URL||'http://localhost:8003/api/v1',APPOINTMENT_SERVICE:process.env.REACT_APP_APPOINTMENT_SERVICE_URL||'http://localhost:8004/api/v1',NOTIFICATION_SERVICE:process.env.REACT_APP_NOTIFICATION_SERVICE_URL||'http://localhost:8005/api/v1',PAYMENT_SERVICE:process.env.REACT_APP_PAYMENT_SERVICE_URL||'http://localhost:8006/api/v1',REPORT_SERVICE:process.env.REACT_APP_REPORT_SERVICE_URL||'http://localhost:8007/api/v1',ANALYTICS_SERVICE:process.env.REACT_APP_ANALYTICS_SERVICE_URL||'http://localhost:8008/api/v1',AUDIT_SERVICE:process.env.REACT_APP_AUDIT_SERVICE_URL||'http://localhost:8009/api/v1',DRUG_SERVICE:process.env.REACT_APP_DRUG_SERVICE_URL||'http://localhost:8010/api/v1',DISEASE_ALERT_SERVICE:process.env.REACT_APP_DISEASE_ALERT_SERVICE_URL||'http://localhost:8011/api/v1'};/**\n * Tworzenie instancji axios z konfiguracją\n * @param {string} baseURL - Bazowy URL mikroserwisu\n * @returns {AxiosInstance} Skonfigurowana instancja axios\n */const createApiInstance=baseURL=>{const instance=axios.create({baseURL,timeout:30000,headers:{'Content-Type':'application/json','Accept':'application/json'}});// Interceptor dla requestów - dodawanie tokena - VS\ninstance.interceptors.request.use(config=>{const token=localStorage.getItem('accessToken');if(token){config.headers.Authorization=\"Bearer \".concat(token);}// Dodanie języka - VS\nconst language=localStorage.getItem('language')||'pl';config.headers['Accept-Language']=language;return config;},error=>{return Promise.reject(error);});// Interceptor dla odpowiedzi - obsługa błędów i refresh token - VS\ninstance.interceptors.response.use(response=>response,async error=>{var _error$response,_error$response2,_error$response3,_error$response3$data,_error$response4,_error$response4$data,_error$response5,_error$response5$data;const originalRequest=error.config;// Jeśli błąd 401 i nie jest to retry - próbuj odświeżyć token - VS\nif(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===401&&!originalRequest._retry){originalRequest._retry=true;try{const refreshToken=localStorage.getItem('refreshToken');if(refreshToken){const response=await axios.post(\"\".concat(API_CONFIG.AUTH_SERVICE,\"/auth/refresh\"),{refreshToken});const{accessToken}=response.data;localStorage.setItem('accessToken',accessToken);originalRequest.headers.Authorization=\"Bearer \".concat(accessToken);return instance(originalRequest);}}catch(refreshError){// Jeśli refresh się nie powiódł - wyloguj - VS\nlocalStorage.removeItem('accessToken');localStorage.removeItem('refreshToken');window.location.href='/login';return Promise.reject(refreshError);}}// Formatowanie błędu - VS\nconst formattedError={status:(_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.status,message:((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.message)||error.message,code:(_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.code,details:(_error$response5=error.response)===null||_error$response5===void 0?void 0:(_error$response5$data=_error$response5.data)===null||_error$response5$data===void 0?void 0:_error$response5$data.details};return Promise.reject(formattedError);});return instance;};// Instancje API dla każdego mikroserwisu - VS\nexport const authApi=createApiInstance(API_CONFIG.AUTH_SERVICE);export const userApi=createApiInstance(API_CONFIG.USER_SERVICE);export const medicalApi=createApiInstance(API_CONFIG.MEDICAL_SERVICE);export const appointmentApi=createApiInstance(API_CONFIG.APPOINTMENT_SERVICE);export const notificationApi=createApiInstance(API_CONFIG.NOTIFICATION_SERVICE);export const paymentApi=createApiInstance(API_CONFIG.PAYMENT_SERVICE);export const reportApi=createApiInstance(API_CONFIG.REPORT_SERVICE);export const analyticsApi=createApiInstance(API_CONFIG.ANALYTICS_SERVICE);export const auditApi=createApiInstance(API_CONFIG.AUDIT_SERVICE);export const drugApi=createApiInstance(API_CONFIG.DRUG_SERVICE);export const diseaseAlertApi=createApiInstance(API_CONFIG.DISEASE_ALERT_SERVICE);export const petApi=createApiInstance(API_CONFIG.PET_SERVICE);export const drugInfoApi=createApiInstance(API_CONFIG.DRUG_INFO_SERVICE);// Export konfiguracji - VS\nexport{API_CONFIG};// Domyślny eksport z wszystkimi instancjami - VS\nexport default{auth:authApi,user:userApi,medical:medicalApi,appointment:appointmentApi,notification:notificationApi,payment:paymentApi,report:reportApi,analytics:analyticsApi,audit:auditApi,drug:drugApi,diseaseAlert:diseaseAlertApi};","map":{"version":3,"names":["axios","API_CONFIG","AUTH_SERVICE","process","env","REACT_APP_AUTH_SERVICE_URL","USER_SERVICE","REACT_APP_USER_SERVICE_URL","MEDICAL_SERVICE","REACT_APP_MEDICAL_SERVICE_URL","APPOINTMENT_SERVICE","REACT_APP_APPOINTMENT_SERVICE_URL","NOTIFICATION_SERVICE","REACT_APP_NOTIFICATION_SERVICE_URL","PAYMENT_SERVICE","REACT_APP_PAYMENT_SERVICE_URL","REPORT_SERVICE","REACT_APP_REPORT_SERVICE_URL","ANALYTICS_SERVICE","REACT_APP_ANALYTICS_SERVICE_URL","AUDIT_SERVICE","REACT_APP_AUDIT_SERVICE_URL","DRUG_SERVICE","REACT_APP_DRUG_SERVICE_URL","DISEASE_ALERT_SERVICE","REACT_APP_DISEASE_ALERT_SERVICE_URL","createApiInstance","baseURL","instance","create","timeout","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","concat","language","error","Promise","reject","response","_error$response","_error$response2","_error$response3","_error$response3$data","_error$response4","_error$response4$data","_error$response5","_error$response5$data","originalRequest","status","_retry","refreshToken","post","accessToken","data","setItem","refreshError","removeItem","window","location","href","formattedError","message","code","details","authApi","userApi","medicalApi","appointmentApi","notificationApi","paymentApi","reportApi","analyticsApi","auditApi","drugApi","diseaseAlertApi","petApi","PET_SERVICE","drugInfoApi","DRUG_INFO_SERVICE","auth","user","medical","appointment","notification","payment","report","analytics","audit","drug","diseaseAlert"],"sources":["C:/Users/Viliam/Desktop/petcareapp-final/petcareapp/frontend/src/services/api.js"],"sourcesContent":["/**\n * PetCareApp - Serwis API\n * Główny moduł do komunikacji z mikroserwisami backendu\n * @author VS\n */\n\nimport axios from 'axios';\n\n// Konfiguracja bazowych URL dla mikroserwisów - VS\nconst API_CONFIG = {\n    AUTH_SERVICE: process.env.REACT_APP_AUTH_SERVICE_URL || 'http://localhost:8001/api/v1',\n    USER_SERVICE: process.env.REACT_APP_USER_SERVICE_URL || 'http://localhost:8002/api/v1',\n    MEDICAL_SERVICE: process.env.REACT_APP_MEDICAL_SERVICE_URL || 'http://localhost:8003/api/v1',\n    APPOINTMENT_SERVICE: process.env.REACT_APP_APPOINTMENT_SERVICE_URL || 'http://localhost:8004/api/v1',\n    NOTIFICATION_SERVICE: process.env.REACT_APP_NOTIFICATION_SERVICE_URL || 'http://localhost:8005/api/v1',\n    PAYMENT_SERVICE: process.env.REACT_APP_PAYMENT_SERVICE_URL || 'http://localhost:8006/api/v1',\n    REPORT_SERVICE: process.env.REACT_APP_REPORT_SERVICE_URL || 'http://localhost:8007/api/v1',\n    ANALYTICS_SERVICE: process.env.REACT_APP_ANALYTICS_SERVICE_URL || 'http://localhost:8008/api/v1',\n    AUDIT_SERVICE: process.env.REACT_APP_AUDIT_SERVICE_URL || 'http://localhost:8009/api/v1',\n    DRUG_SERVICE: process.env.REACT_APP_DRUG_SERVICE_URL || 'http://localhost:8010/api/v1',\n    DISEASE_ALERT_SERVICE: process.env.REACT_APP_DISEASE_ALERT_SERVICE_URL || 'http://localhost:8011/api/v1'\n    \n};\n\n/**\n * Tworzenie instancji axios z konfiguracją\n * @param {string} baseURL - Bazowy URL mikroserwisu\n * @returns {AxiosInstance} Skonfigurowana instancja axios\n */\nconst createApiInstance = (baseURL) => {\n    const instance = axios.create({\n        baseURL,\n        timeout: 30000,\n        headers: {\n            'Content-Type': 'application/json',\n            'Accept': 'application/json'\n        }\n    });\n\n    // Interceptor dla requestów - dodawanie tokena - VS\n    instance.interceptors.request.use(\n        (config) => {\n            const token = localStorage.getItem('accessToken');\n            if (token) {\n                config.headers.Authorization = `Bearer ${token}`;\n            }\n            \n            // Dodanie języka - VS\n            const language = localStorage.getItem('language') || 'pl';\n            config.headers['Accept-Language'] = language;\n            \n            return config;\n        },\n        (error) => {\n            return Promise.reject(error);\n        }\n    );\n\n    // Interceptor dla odpowiedzi - obsługa błędów i refresh token - VS\n    instance.interceptors.response.use(\n        (response) => response,\n        async (error) => {\n            const originalRequest = error.config;\n\n            // Jeśli błąd 401 i nie jest to retry - próbuj odświeżyć token - VS\n            if (error.response?.status === 401 && !originalRequest._retry) {\n                originalRequest._retry = true;\n\n                try {\n                    const refreshToken = localStorage.getItem('refreshToken');\n                    if (refreshToken) {\n                        const response = await axios.post(\n                            `${API_CONFIG.AUTH_SERVICE}/auth/refresh`,\n                            { refreshToken }\n                        );\n\n                        const { accessToken } = response.data;\n                        localStorage.setItem('accessToken', accessToken);\n\n                        originalRequest.headers.Authorization = `Bearer ${accessToken}`;\n                        return instance(originalRequest);\n                    }\n                } catch (refreshError) {\n                    // Jeśli refresh się nie powiódł - wyloguj - VS\n                    localStorage.removeItem('accessToken');\n                    localStorage.removeItem('refreshToken');\n                    window.location.href = '/login';\n                    return Promise.reject(refreshError);\n                }\n            }\n\n            // Formatowanie błędu - VS\n            const formattedError = {\n                status: error.response?.status,\n                message: error.response?.data?.message || error.message,\n                code: error.response?.data?.code,\n                details: error.response?.data?.details\n            };\n\n            return Promise.reject(formattedError);\n        }\n    );\n\n    return instance;\n};\n\n// Instancje API dla każdego mikroserwisu - VS\nexport const authApi = createApiInstance(API_CONFIG.AUTH_SERVICE);\nexport const userApi = createApiInstance(API_CONFIG.USER_SERVICE);\nexport const medicalApi = createApiInstance(API_CONFIG.MEDICAL_SERVICE);\nexport const appointmentApi = createApiInstance(API_CONFIG.APPOINTMENT_SERVICE);\nexport const notificationApi = createApiInstance(API_CONFIG.NOTIFICATION_SERVICE);\nexport const paymentApi = createApiInstance(API_CONFIG.PAYMENT_SERVICE);\nexport const reportApi = createApiInstance(API_CONFIG.REPORT_SERVICE);\nexport const analyticsApi = createApiInstance(API_CONFIG.ANALYTICS_SERVICE);\nexport const auditApi = createApiInstance(API_CONFIG.AUDIT_SERVICE);\nexport const drugApi = createApiInstance(API_CONFIG.DRUG_SERVICE);\nexport const diseaseAlertApi = createApiInstance(API_CONFIG.DISEASE_ALERT_SERVICE);\nexport const petApi = createApiInstance(API_CONFIG.PET_SERVICE);\nexport const drugInfoApi = createApiInstance(API_CONFIG.DRUG_INFO_SERVICE);\n\n// Export konfiguracji - VS\nexport { API_CONFIG };\n\n// Domyślny eksport z wszystkimi instancjami - VS\nexport default {\n    auth: authApi,\n    user: userApi,\n    medical: medicalApi,\n    appointment: appointmentApi,\n    notification: notificationApi,\n    payment: paymentApi,\n    report: reportApi,\n    analytics: analyticsApi,\n    audit: auditApi,\n    drug: drugApi,\n    diseaseAlert: diseaseAlertApi\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}