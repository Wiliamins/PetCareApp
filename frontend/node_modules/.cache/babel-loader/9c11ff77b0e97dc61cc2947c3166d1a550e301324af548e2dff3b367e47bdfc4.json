{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Viliam\\\\Desktop\\\\petcareapp-final\\\\petcareapp\\\\frontend\\\\src\\\\context\\\\AuthContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n/**\n * PetCareApp - Kontekst autoryzacji\n * Zarządzanie stanem użytkownika, logowanie, wylogowanie, rejestracja\n * @author VS\n */\n\nimport React, { createContext, useContext, useState, useEffect, useCallback } from 'react';\nimport { authService } from '../services/authService';\n\n// Tworzenie kontekstu - VS\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext(null);\n\n/**\n * Provider kontekstu autoryzacji\n * @param {Object} props - Właściwości komponentu\n * @param {React.ReactNode} props.children - Komponenty dzieci\n */\nexport function AuthProvider({\n  children\n}) {\n  _s();\n  // Stan użytkownika - VS\n  const [user, setUser] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // Sprawdzenie sesji przy starcie aplikacji - VS\n  useEffect(() => {\n    const checkAuth = async () => {\n      try {\n        const token = localStorage.getItem('accessToken');\n        if (token) {\n          const userData = await authService.verifyToken(token);\n          setUser(userData);\n        }\n      } catch (err) {\n        localStorage.removeItem('accessToken');\n        localStorage.removeItem('refreshToken');\n        console.error('Błąd weryfikacji tokena:', err);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    checkAuth();\n  }, []);\n\n  /**\n   * Logowanie użytkownika\n   * @param {string} email - Adres email\n   * @param {string} password - Hasło\n   * @param {string} role - Rola użytkownika\n   */\n  const login = useCallback(async (email, password, role) => {\n    setIsLoading(true);\n    setError(null);\n    try {\n      const response = await authService.login(email, password, role);\n\n      // Zapisanie tokenów - VS\n      localStorage.setItem('accessToken', response.accessToken);\n      localStorage.setItem('refreshToken', response.refreshToken);\n      setUser(response.user);\n      return response.user;\n    } catch (err) {\n      setError(err.message);\n      throw err;\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  /**\n   * Rejestracja nowego użytkownika (tylko klient)\n   * @param {Object} userData - Dane rejestracyjne\n   */\n  const register = useCallback(async userData => {\n    setIsLoading(true);\n    setError(null);\n    try {\n      const response = await authService.register(userData);\n      return response;\n    } catch (err) {\n      setError(err.message);\n      throw err;\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  /**\n   * Wylogowanie użytkownika\n   */\n  const logout = useCallback(async () => {\n    try {\n      await authService.logout();\n    } catch (err) {\n      console.error('Błąd wylogowania:', err);\n    } finally {\n      // Zawsze czyścimy stan lokalny - VS\n      localStorage.removeItem('accessToken');\n      localStorage.removeItem('refreshToken');\n      setUser(null);\n    }\n  }, []);\n\n  /**\n   * Resetowanie hasła\n   * @param {string} email - Adres email\n   */\n  const resetPassword = useCallback(async email => {\n    setIsLoading(true);\n    setError(null);\n    try {\n      await authService.resetPassword(email);\n    } catch (err) {\n      setError(err.message);\n      throw err;\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  /**\n   * Aktualizacja danych użytkownika\n   * @param {Object} updates - Dane do aktualizacji\n   */\n  const updateUser = useCallback(async updates => {\n    try {\n      const updatedUser = await authService.updateProfile(updates);\n      setUser(prev => ({\n        ...prev,\n        ...updatedUser\n      }));\n      return updatedUser;\n    } catch (err) {\n      setError(err.message);\n      throw err;\n    }\n  }, []);\n\n  // Wartość kontekstu - VS\n  const value = {\n    user,\n    isLoading,\n    error,\n    isAuthenticated: !!user,\n    login,\n    register,\n    logout,\n    resetPassword,\n    updateUser,\n    clearError: () => setError(null)\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 155,\n    columnNumber: 9\n  }, this);\n}\n\n/**\n * Hook do użycia kontekstu autoryzacji\n * @returns {Object} Kontekst autoryzacji\n */\n_s(AuthProvider, \"eGbyzHhS/Ipu3Q6J5sLaLhfccyc=\");\n_c = AuthProvider;\nexport function useAuth() {\n  _s2();\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth musi być użyty wewnątrz AuthProvider');\n  }\n  return context;\n}\n_s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport default AuthContext;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","useCallback","authService","jsxDEV","_jsxDEV","AuthContext","AuthProvider","children","_s","user","setUser","isLoading","setIsLoading","error","setError","checkAuth","token","localStorage","getItem","userData","verifyToken","err","removeItem","console","login","email","password","role","response","setItem","accessToken","refreshToken","message","register","logout","resetPassword","updateUser","updates","updatedUser","updateProfile","prev","value","isAuthenticated","clearError","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","useAuth","_s2","context","Error","$RefreshReg$"],"sources":["C:/Users/Viliam/Desktop/petcareapp-final/petcareapp/frontend/src/context/AuthContext.js"],"sourcesContent":["/**\n * PetCareApp - Kontekst autoryzacji\n * Zarządzanie stanem użytkownika, logowanie, wylogowanie, rejestracja\n * @author VS\n */\n\nimport React, { createContext, useContext, useState, useEffect, useCallback } from 'react';\nimport { authService } from '../services/authService';\n\n// Tworzenie kontekstu - VS\nconst AuthContext = createContext(null);\n\n/**\n * Provider kontekstu autoryzacji\n * @param {Object} props - Właściwości komponentu\n * @param {React.ReactNode} props.children - Komponenty dzieci\n */\nexport function AuthProvider({ children }) {\n    // Stan użytkownika - VS\n    const [user, setUser] = useState(null);\n    const [isLoading, setIsLoading] = useState(true);\n    const [error, setError] = useState(null);\n\n    // Sprawdzenie sesji przy starcie aplikacji - VS\n    useEffect(() => {\n        const checkAuth = async () => {\n            try {\n                const token = localStorage.getItem('accessToken');\n                if (token) {\n                    const userData = await authService.verifyToken(token);\n                    setUser(userData);\n                }\n            } catch (err) {\n                localStorage.removeItem('accessToken');\n                localStorage.removeItem('refreshToken');\n                console.error('Błąd weryfikacji tokena:', err);\n            } finally {\n                setIsLoading(false);\n            }\n        };\n\n        checkAuth();\n    }, []);\n\n    /**\n     * Logowanie użytkownika\n     * @param {string} email - Adres email\n     * @param {string} password - Hasło\n     * @param {string} role - Rola użytkownika\n     */\n    const login = useCallback(async (email, password, role) => {\n        setIsLoading(true);\n        setError(null);\n\n        try {\n            const response = await authService.login(email, password, role);\n            \n            // Zapisanie tokenów - VS\n            localStorage.setItem('accessToken', response.accessToken);\n            localStorage.setItem('refreshToken', response.refreshToken);\n            \n            setUser(response.user);\n            return response.user;\n        } catch (err) {\n            setError(err.message);\n            throw err;\n        } finally {\n            setIsLoading(false);\n        }\n    }, []);\n\n    /**\n     * Rejestracja nowego użytkownika (tylko klient)\n     * @param {Object} userData - Dane rejestracyjne\n     */\n    const register = useCallback(async (userData) => {\n        setIsLoading(true);\n        setError(null);\n\n        try {\n            const response = await authService.register(userData);\n            return response;\n        } catch (err) {\n            setError(err.message);\n            throw err;\n        } finally {\n            setIsLoading(false);\n        }\n    }, []);\n\n    /**\n     * Wylogowanie użytkownika\n     */\n    const logout = useCallback(async () => {\n        try {\n            await authService.logout();\n        } catch (err) {\n            console.error('Błąd wylogowania:', err);\n        } finally {\n            // Zawsze czyścimy stan lokalny - VS\n            localStorage.removeItem('accessToken');\n            localStorage.removeItem('refreshToken');\n            setUser(null);\n        }\n    }, []);\n\n    /**\n     * Resetowanie hasła\n     * @param {string} email - Adres email\n     */\n    const resetPassword = useCallback(async (email) => {\n        setIsLoading(true);\n        setError(null);\n\n        try {\n            await authService.resetPassword(email);\n        } catch (err) {\n            setError(err.message);\n            throw err;\n        } finally {\n            setIsLoading(false);\n        }\n    }, []);\n\n    /**\n     * Aktualizacja danych użytkownika\n     * @param {Object} updates - Dane do aktualizacji\n     */\n    const updateUser = useCallback(async (updates) => {\n        try {\n            const updatedUser = await authService.updateProfile(updates);\n            setUser(prev => ({ ...prev, ...updatedUser }));\n            return updatedUser;\n        } catch (err) {\n            setError(err.message);\n            throw err;\n        }\n    }, []);\n\n    // Wartość kontekstu - VS\n    const value = {\n        user,\n        isLoading,\n        error,\n        isAuthenticated: !!user,\n        login,\n        register,\n        logout,\n        resetPassword,\n        updateUser,\n        clearError: () => setError(null)\n    };\n\n    return (\n        <AuthContext.Provider value={value}>\n            {children}\n        </AuthContext.Provider>\n    );\n}\n\n/**\n * Hook do użycia kontekstu autoryzacji\n * @returns {Object} Kontekst autoryzacji\n */\nexport function useAuth() {\n    const context = useContext(AuthContext);\n    \n    if (!context) {\n        throw new Error('useAuth musi być użyty wewnątrz AuthProvider');\n    }\n    \n    return context;\n}\n\nexport default AuthContext;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}