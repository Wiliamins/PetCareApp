"use strict";(self.webpackChunkpetcareapp_frontend=self.webpackChunkpetcareapp_frontend||[]).push([[930],{4495(e,a,t){t.r(a),t.d(a,{default:()=>u});var s=t(2555),n=t(5043),i=t(4117),l=t(6776),c=t(6257),o=t(2318),d=t(4793),r=t(6481),p=t(5114),m=t(6305);const h={async getAppointments(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await m.Y0.get("/appointments",{params:e})).data},getAppointmentById:async e=>(await m.Y0.get("/appointments/".concat(e))).data,createAppointment:async e=>(await m.Y0.post("/appointments",e)).data,updateAppointment:async(e,a)=>(await m.Y0.put("/appointments/".concat(e),a)).data,async cancelAppointment(e,a){await m.Y0.post("/appointments/".concat(e,"/cancel"),{reason:a})},confirmAppointment:async e=>(await m.Y0.post("/appointments/".concat(e,"/confirm"))).data,getAvailableSlots:async(e,a,t)=>(await m.Y0.get("/appointments/slots",{params:{vetId:e,date:a,serviceType:t}})).data,async getVeterinarians(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const a=e?{specialization:e}:{};return(await m.Y0.get("/veterinarians",{params:a})).data},getAppointmentTypes:async()=>(await m.Y0.get("/appointment-types")).data,getDaySchedule:async e=>(await m.Y0.get("/appointments/schedule",{params:{date:e}})).data,getVetSchedule:async(e,a,t)=>(await m.Y0.get("/veterinarians/".concat(e,"/schedule"),{params:{startDate:a,endDate:t}})).data,setAvailability:async e=>(await m.Y0.post("/veterinarians/availability",e)).data,completeAppointment:async(e,a)=>(await m.Y0.post("/appointments/".concat(e,"/complete"),a)).data,async getAppointmentStats(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await m.Y0.get("/appointments/stats",{params:e})).data}},v=h;var y=t(7445),x=(t(7772),t(9787),t(579));const u=function(){var e,a;const{t:t}=(0,i.Bd)(),{showNotification:m}=(0,p.hN)(),[h,u]=(0,n.useState)([]),[j,g]=(0,n.useState)(!0),[b,w]=(0,n.useState)("upcoming"),[z,N]=(0,n.useState)(!1),[f,k]=(0,n.useState)(null),[A,C]=(0,n.useState)(1),[I,S]=(0,n.useState)([]),[D,W]=(0,n.useState)([]),[T,Y]=(0,n.useState)([]),[B,P]=(0,n.useState)({petId:"",vetId:"",date:"",time:"",type:"consultation",notes:""}),M=[{path:"/dashboard/client",label:t("dashboard.client.overview"),icon:"\ud83d\udcca",exact:!0},{path:"/dashboard/client/pets",label:t("dashboard.client.pets"),icon:"\ud83d\udc3e"},{path:"/dashboard/client/appointments",label:t("dashboard.client.appointments"),icon:"\ud83d\udcc5"},{path:"/dashboard/client/notifications",label:t("dashboard.client.notifications"),icon:"\ud83d\udd14"},{path:"/dashboard/client/payments",label:t("dashboard.client.payments"),icon:"\ud83d\udcb3"},{path:"/dashboard/client/contact",label:t("dashboard.client.contact"),icon:"\u2709\ufe0f"}],K=[{value:"consultation",label:"Konsultacja",icon:"\ud83d\udcac",price:100},{value:"vaccination",label:"Szczepienie",icon:"\ud83d\udc89",price:80},{value:"checkup",label:"Badanie kontrolne",icon:"\ud83e\ude7a",price:120},{value:"surgery",label:"Zabieg",icon:"\u2695\ufe0f",price:300},{value:"grooming",label:"Piel\u0119gnacja",icon:"\u2702\ufe0f",price:60},{value:"emergency",label:"Nag\u0142y przypadek",icon:"\ud83d\udea8",price:200}];(0,n.useEffect)(()=>{L(),Z(),O()},[]);const L=async()=>{try{g(!0);const e=await v.getMyAppointments();u(e.data||[])}catch(e){u([{id:"1",petId:"1",petName:"Burek",vetName:"dr Anna Kowalska",date:"2024-12-20",time:"14:00",type:"checkup",status:"confirmed",notes:""},{id:"2",petId:"2",petName:"Mruczka",vetName:"dr Jan Nowak",date:"2024-12-22",time:"10:00",type:"vaccination",status:"pending",notes:"Szczepienie przeciw w\u015bciekli\u017anie"},{id:"3",petId:"1",petName:"Burek",vetName:"dr Anna Kowalska",date:"2024-11-15",time:"09:00",type:"consultation",status:"completed",notes:"Kontrola po zabiegu"},{id:"4",petId:"2",petName:"Mruczka",vetName:"dr Maria Wi\u015bniewska",date:"2024-10-20",time:"11:00",type:"grooming",status:"completed",notes:""}])}finally{g(!1)}},Z=async()=>{try{const e=await y.A.getMyPets();S(e.data||[])}catch(e){S([{id:"1",name:"Burek",species:"dog"},{id:"2",name:"Mruczka",species:"cat"}])}},O=async()=>{try{const e=await v.getVeterinarians();W(e.data||[])}catch(e){W([{id:"1",name:"dr Anna Kowalska",specialization:"Chirurgia"},{id:"2",name:"dr Jan Nowak",specialization:"Dermatologia"},{id:"3",name:"dr Maria Wi\u015bniewska",specialization:"Kardiologia"}])}},V=async(e,a)=>{try{const t=await v.getAvailableSlots(e,a);Y(t.data||[])}catch(t){const e=["10:00","14:00","15:30"];Y(["09:00","09:30","10:00","10:30","11:00","11:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30"].map(a=>({time:a,available:!e.includes(a)})))}},H=h.filter(e=>{const a=new Date(e.date),t=new Date;switch(t.setHours(0,0,0,0),b){case"upcoming":return a>=t&&"cancelled"!==e.status;case"past":return a<t||"completed"===e.status;case"cancelled":return"cancelled"===e.status;default:return!0}}).sort((e,a)=>"past"===b?new Date(a.date)-new Date(e.date):new Date(e.date)-new Date(a.date)),J=(e,a)=>{P(t=>(0,s.A)((0,s.A)({},t),{},{[e]:a})),"vetId"===e&&B.date&&V(a,B.date),"date"===e&&B.vetId&&V(B.vetId,a)},U=()=>{P({petId:"",vetId:"",date:"",time:"",type:"consultation",notes:""}),C(1),N(!0)},_=()=>{N(!1),C(1)},E=e=>K.find(a=>a.value===e)||{label:e,icon:"\ud83d\udccb"},q=new Date;q.setDate(q.getDate()+1);const F=q.toISOString().split("T")[0];return j?(0,x.jsx)(l.A,{menuItems:M,title:t("appointments.title"),roleColor:"#2d7a5e",children:(0,x.jsx)(r.A,{})}):(0,x.jsx)(l.A,{menuItems:M,title:t("appointments.title"),roleColor:"#2d7a5e",children:(0,x.jsxs)("div",{className:"dashboard-page",children:[(0,x.jsxs)("div",{className:"page-header",children:[(0,x.jsxs)("div",{className:"filter-buttons",children:[(0,x.jsx)("button",{className:"filter-btn ".concat("upcoming"===b?"active":""),onClick:()=>w("upcoming"),children:"\ud83d\udcc5 Nadchodz\u0105ce"}),(0,x.jsx)("button",{className:"filter-btn ".concat("past"===b?"active":""),onClick:()=>w("past"),children:"\ud83d\udccb Historia"}),(0,x.jsx)("button",{className:"filter-btn ".concat("cancelled"===b?"active":""),onClick:()=>w("cancelled"),children:"\u274c Anulowane"})]}),(0,x.jsxs)(o.A,{onClick:U,children:["+ ",t("appointments.book")]})]}),0===H.length?(0,x.jsx)(c.A,{className:"empty-state-card",children:(0,x.jsxs)("div",{className:"empty-state",children:[(0,x.jsx)("span",{className:"empty-icon",children:"\ud83d\udcc5"}),(0,x.jsx)("h3",{children:"upcoming"===b?"Brak nadchodz\u0105cych wizyt":"Brak wizyt"}),(0,x.jsx)("p",{children:"Um\xf3w pierwsz\u0105 wizyt\u0119 dla swojego pupila"}),(0,x.jsx)(o.A,{onClick:U,children:t("appointments.book")})]})}):(0,x.jsx)("div",{className:"appointments-list-page",children:H.map(e=>{const a=(e=>{const a=new Date(e);return{day:a.getDate(),month:a.toLocaleString("pl",{month:"short"}),weekday:a.toLocaleString("pl",{weekday:"long"})}})(e.date),t=E(e.type),s={confirmed:{label:"Potwierdzona",class:"confirmed"},pending:{label:"Oczekuje",class:"pending"},completed:{label:"Zako\u0144czona",class:"completed"},cancelled:{label:"Anulowana",class:"cancelled"}}[n=e.status]||{label:n,class:""};var n;return(0,x.jsxs)(c.A,{className:"appointment-card",hoverable:!0,children:[(0,x.jsxs)("div",{className:"appointment-date-box",children:[(0,x.jsx)("span",{className:"date-day",children:a.day}),(0,x.jsx)("span",{className:"date-month",children:a.month})]}),(0,x.jsxs)("div",{className:"appointment-info",children:[(0,x.jsxs)("div",{className:"appointment-type",children:[t.icon," ",t.label]}),(0,x.jsxs)("div",{className:"appointment-meta",children:[(0,x.jsxs)("span",{children:["\ud83d\udd50 ",e.time]}),(0,x.jsxs)("span",{children:["\ud83d\udc3e ",e.petName]}),(0,x.jsxs)("span",{children:["\ud83d\udc68\u200d\u2695\ufe0f ",e.vetName]})]}),e.notes&&(0,x.jsxs)("p",{style:{fontSize:"var(--text-sm)",color:"var(--text-muted)",marginTop:"var(--space-2)"},children:["\ud83d\udcdd ",e.notes]})]}),(0,x.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"var(--space-3)"},children:[(0,x.jsx)("span",{className:"appointment-status-badge ".concat(s.class),children:s.label}),("confirmed"===e.status||"pending"===e.status)&&(0,x.jsx)(o.A,{variant:"ghost",size:"small",onClick:()=>k(e.id),children:"Anuluj"})]})]},e.id)})}),z&&(0,x.jsx)("div",{className:"modal-overlay",onClick:_,children:(0,x.jsxs)("div",{className:"modal-content modal-large",onClick:e=>e.stopPropagation(),children:[(0,x.jsxs)("div",{className:"modal-header",children:[(0,x.jsx)("h2",{children:t("appointments.book")}),(0,x.jsx)("button",{className:"modal-close",onClick:_,children:"\xd7"})]}),(0,x.jsxs)("div",{className:"booking-steps",children:[(0,x.jsxs)("div",{className:"step ".concat(A>=1?"active":""," ").concat(A>1?"completed":""),children:[(0,x.jsx)("span",{className:"step-number",children:A>1?"\u2713":"1"}),(0,x.jsx)("span",{children:"Zwierz\u0119"})]}),(0,x.jsx)("div",{className:"step-connector"}),(0,x.jsxs)("div",{className:"step ".concat(A>=2?"active":""," ").concat(A>2?"completed":""),children:[(0,x.jsx)("span",{className:"step-number",children:A>2?"\u2713":"2"}),(0,x.jsx)("span",{children:"Typ wizyty"})]}),(0,x.jsx)("div",{className:"step-connector"}),(0,x.jsxs)("div",{className:"step ".concat(A>=3?"active":""," ").concat(A>3?"completed":""),children:[(0,x.jsx)("span",{className:"step-number",children:A>3?"\u2713":"3"}),(0,x.jsx)("span",{children:"Termin"})]}),(0,x.jsx)("div",{className:"step-connector"}),(0,x.jsxs)("div",{className:"step ".concat(A>=4?"active":""),children:[(0,x.jsx)("span",{className:"step-number",children:"4"}),(0,x.jsx)("span",{children:"Potwierdzenie"})]})]}),(0,x.jsxs)("div",{className:"modal-body",children:[1===A&&(0,x.jsxs)("div",{children:[(0,x.jsx)("h3",{style:{marginBottom:"var(--space-4)"},children:"Wybierz zwierz\u0119"}),(0,x.jsx)("div",{className:"pets-grid",style:{gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))"},children:I.map(e=>(0,x.jsx)(c.A,{className:"pet-select-card ".concat(B.petId===e.id?"selected":""),onClick:()=>J("petId",e.id),hoverable:!0,style:{cursor:"pointer",border:B.petId===e.id?"2px solid var(--primary)":"1px solid var(--border-color)"},children:(0,x.jsxs)("div",{style:{textAlign:"center",padding:"var(--space-4)"},children:[(0,x.jsx)("span",{style:{fontSize:"3rem"},children:"dog"===e.species?"\ud83d\udc15":"\ud83d\udc31"}),(0,x.jsx)("h4",{style:{margin:"var(--space-2) 0 0"},children:e.name})]})},e.id))})]}),2===A&&(0,x.jsxs)("div",{children:[(0,x.jsx)("h3",{style:{marginBottom:"var(--space-4)"},children:"Wybierz typ wizyty"}),(0,x.jsx)("div",{className:"pets-grid",style:{gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))"},children:K.map(e=>(0,x.jsx)(c.A,{onClick:()=>J("type",e.value),hoverable:!0,style:{cursor:"pointer",border:B.type===e.value?"2px solid var(--primary)":"1px solid var(--border-color)"},children:(0,x.jsxs)("div",{style:{textAlign:"center",padding:"var(--space-4)"},children:[(0,x.jsx)("span",{style:{fontSize:"2rem"},children:e.icon}),(0,x.jsx)("h4",{style:{margin:"var(--space-2) 0"},children:e.label}),(0,x.jsxs)("span",{style:{color:"var(--primary)",fontWeight:600},children:[e.price," z\u0142"]})]})},e.value))})]}),3===A&&(0,x.jsxs)("div",{children:[(0,x.jsx)("h3",{style:{marginBottom:"var(--space-4)"},children:"Wybierz termin"}),(0,x.jsxs)("div",{className:"form-grid",children:[(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{children:"Lekarz"}),(0,x.jsxs)("select",{value:B.vetId,onChange:e=>J("vetId",e.target.value),children:[(0,x.jsx)("option",{value:"",children:"Wybierz lekarza..."}),D.map(e=>(0,x.jsxs)("option",{value:e.id,children:[e.name," - ",e.specialization]},e.id))]})]}),(0,x.jsx)(d.A,{label:"Data",type:"date",value:B.date,onChange:e=>J("date",e.target.value),min:F})]}),B.vetId&&B.date&&(0,x.jsxs)("div",{style:{marginTop:"var(--space-6)"},children:[(0,x.jsx)("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:500},children:"Dost\u0119pne godziny"}),(0,x.jsx)("div",{className:"time-slots-grid",children:T.map(e=>(0,x.jsx)("button",{className:"time-slot ".concat(e.available?"":"unavailable"," ").concat(B.time===e.time?"selected":""),onClick:()=>e.available&&J("time",e.time),disabled:!e.available,children:e.time},e.time))})]}),(0,x.jsxs)("div",{className:"form-group",style:{marginTop:"var(--space-4)"},children:[(0,x.jsx)("label",{children:"Dodatkowe uwagi (opcjonalnie)"}),(0,x.jsx)("textarea",{value:B.notes,onChange:e=>J("notes",e.target.value),rows:3,placeholder:"Opisz objawy lub cel wizyty..."})]})]}),4===A&&(0,x.jsxs)("div",{children:[(0,x.jsx)("h3",{style:{marginBottom:"var(--space-4)"},children:"Podsumowanie rezerwacji"}),(0,x.jsx)(c.A,{variant:"flat",children:(0,x.jsx)("div",{style:{padding:"var(--space-4)"},children:(0,x.jsxs)("div",{style:{display:"grid",gap:"var(--space-3)"},children:[(0,x.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,x.jsx)("span",{style:{color:"var(--text-muted)"},children:"Zwierz\u0119:"}),(0,x.jsx)("span",{style:{fontWeight:500},children:null===(e=I.find(e=>e.id===B.petId))||void 0===e?void 0:e.name})]}),(0,x.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,x.jsx)("span",{style:{color:"var(--text-muted)"},children:"Typ wizyty:"}),(0,x.jsxs)("span",{style:{fontWeight:500},children:[E(B.type).icon," ",E(B.type).label]})]}),(0,x.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,x.jsx)("span",{style:{color:"var(--text-muted)"},children:"Lekarz:"}),(0,x.jsx)("span",{style:{fontWeight:500},children:null===(a=D.find(e=>e.id===B.vetId))||void 0===a?void 0:a.name})]}),(0,x.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,x.jsx)("span",{style:{color:"var(--text-muted)"},children:"Data i godzina:"}),(0,x.jsxs)("span",{style:{fontWeight:500},children:[B.date," o ",B.time]})]}),B.notes&&(0,x.jsxs)("div",{children:[(0,x.jsx)("span",{style:{color:"var(--text-muted)"},children:"Uwagi:"}),(0,x.jsx)("p",{style:{margin:"var(--space-1) 0 0",fontStyle:"italic"},children:B.notes})]}),(0,x.jsx)("hr",{style:{border:"none",borderTop:"1px solid var(--border-color)",margin:"var(--space-2) 0"}}),(0,x.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,x.jsx)("span",{style:{fontWeight:600},children:"Szacunkowy koszt:"}),(0,x.jsxs)("span",{style:{fontWeight:700,color:"var(--primary)",fontSize:"var(--text-lg)"},children:[E(B.type).price," z\u0142"]})]})]})})})]})]}),(0,x.jsxs)("div",{className:"modal-footer",children:[A>1&&(0,x.jsx)(o.A,{variant:"ghost",onClick:()=>{C(e=>e-1)},children:"\u2190 Wstecz"}),(0,x.jsx)("div",{style:{flex:1}}),A<4?(0,x.jsx)(o.A,{onClick:()=>{1!==A||B.petId?2!==A||B.type?3!==A||B.vetId&&B.date&&B.time?C(e=>e+1):m("Wybierz lekarza, dat\u0119 i godzin\u0119","error"):m("Wybierz typ wizyty","error"):m("Wybierz zwierz\u0119","error")},children:"Dalej \u2192"}):(0,x.jsx)(o.A,{onClick:async()=>{try{const e=I.find(e=>e.id===B.petId),a=D.find(e=>e.id===B.vetId);await v.createAppointment(B);const s={id:Date.now().toString(),petId:B.petId,petName:null===e||void 0===e?void 0:e.name,vetName:null===a||void 0===a?void 0:a.name,date:B.date,time:B.time,type:B.type,status:"pending",notes:B.notes};u(e=>[...e,s]),m(t("appointments.booked"),"success"),_()}catch(e){m(t("common.error"),"error")}},children:"\u2713 Potwierd\u017a rezerwacj\u0119"})]})]})}),f&&(0,x.jsx)("div",{className:"modal-overlay",onClick:()=>k(null),children:(0,x.jsxs)("div",{className:"modal-content modal-small",onClick:e=>e.stopPropagation(),children:[(0,x.jsx)("div",{className:"modal-header",children:(0,x.jsx)("h2",{children:"Anuluj wizyt\u0119"})}),(0,x.jsx)("div",{className:"modal-body",children:(0,x.jsx)("p",{children:"Czy na pewno chcesz anulowa\u0107 t\u0119 wizyt\u0119? Tej operacji nie mo\u017cna cofn\u0105\u0107."})}),(0,x.jsxs)("div",{className:"modal-footer",children:[(0,x.jsx)(o.A,{variant:"ghost",onClick:()=>k(null),children:"Nie, zachowaj"}),(0,x.jsx)(o.A,{variant:"danger",onClick:()=>(async e=>{try{await v.cancelAppointment(e),u(a=>a.map(a=>a.id===e?(0,s.A)((0,s.A)({},a),{},{status:"cancelled"}):a)),m(t("appointments.cancelled"),"success"),k(null)}catch(a){m(t("common.error"),"error")}})(f),children:"Tak, anuluj"})]})]})})]})})}}}]);
//# sourceMappingURL=930.ccb520c5.chunk.js.map