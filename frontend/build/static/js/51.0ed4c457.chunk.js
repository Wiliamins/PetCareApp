"use strict";(self.webpackChunkpetcareapp_frontend=self.webpackChunkpetcareapp_frontend||[]).push([[51],{2391(){},3986(e,s,a){function l(e,s){if(null==e)return{};var a,l,n=function(e,s){if(null==e)return{};var a={};for(var l in e)if({}.hasOwnProperty.call(e,l)){if(-1!==s.indexOf(l))continue;a[l]=e[l]}return a}(e,s);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);for(l=0;l<t.length;l++)a=t[l],-1===s.indexOf(a)&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}a.d(s,{A:()=>l})},6051(e,s,a){a.r(s),a.d(s,{default:()=>d});var l=a(2555),n=a(5043),t=a(4117),r=a(6776),i=a(6257),c=a(6481),o=(a(2391),a(579));const d=()=>{const{t:e}=(0,t.Bd)(),[s,a]=(0,n.useState)(!0),[d,h]=(0,n.useState)([]),[m,x]=(0,n.useState)([]),[v,u]=(0,n.useState)({level:"all",service:"all",search:""}),[j,p]=(0,n.useState)(!1),[g,b]=(0,n.useState)(1),f={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"",N=["auth-service","user-service","pet-service","medical-service","appointment-service","payment-service","report-service","analytics-service","audit-service","drug-info-service","disease-alert-service","notification-service","drug-service"],y=(0,n.useCallback)(async()=>{try{const e=await fetch("".concat(f,"/api/v1/logs?limit=500"));if(e.ok){const s=await e.json();h(s.logs||s||[])}else k()}catch(e){console.error("Error fetching logs:",e),k()}finally{a(!1)}},[f]),k=()=>{const e=[],s={info:["User logged in","Appointment created","Payment processed","Email sent"],warning:["Slow query detected","High memory usage","Rate limit approaching"],error:["Database connection failed","Payment timeout","Invalid token"],debug:["Processing request","Cache hit","Query executed"]},a=new Date;for(let l=0;l<200;l++){const n=["info","info","info","warning","error","debug"][Math.floor(6*Math.random())],t=N[Math.floor(Math.random()*N.length)],r=s[n],i=r[Math.floor(Math.random()*r.length)],c=new Date(a-24*Math.random()*60*60*1e3);e.push({id:"log-".concat(l),timestamp:c.toISOString(),level:n,service:t,message:i,userId:Math.random()>.7?"user-".concat(Math.floor(1e3*Math.random())):null,ip:"192.168.1.".concat(Math.floor(255*Math.random()))})}e.sort((e,s)=>new Date(s.timestamp)-new Date(e.timestamp)),h(e)};(0,n.useEffect)(()=>{let e=[...d];if("all"!==v.level&&(e=e.filter(e=>e.level===v.level)),"all"!==v.service&&(e=e.filter(e=>e.service===v.service)),v.search){const s=v.search.toLowerCase();e=e.filter(e=>e.message.toLowerCase().includes(s)||e.service.toLowerCase().includes(s))}x(e),b(1)},[d,v]),(0,n.useEffect)(()=>{let e;return y(),j&&(e=setInterval(y,1e4)),()=>{e&&clearInterval(e)}},[j,y]);const w=e=>{let{level:s}=e;const a={error:{bg:"#fee2e2",color:"#dc2626"},warning:{bg:"#fef3c7",color:"#d97706"},info:{bg:"#dbeafe",color:"#2563eb"},debug:{bg:"#f3f4f6",color:"#6b7280"}},l=a[s]||a.info;return(0,o.jsx)("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"11px",fontWeight:"600",textTransform:"uppercase",backgroundColor:l.bg,color:l.color},children:s})},C=e=>{const s=m.length>0?m:d;if("json"===e){const e=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),a=URL.createObjectURL(e),l=document.createElement("a");l.href=a,l.download="logs-".concat((new Date).toISOString().split("T")[0],".json"),l.click()}else if("csv"===e){const e=["Timestamp","Level","Service","Message","User ID","IP"],a=s.map(e=>[e.timestamp,e.level,e.service,'"'.concat(e.message.replace(/"/g,'""'),'"'),e.userId||"",e.ip||""]),l=[e.join(","),...a.map(e=>e.join(","))].join("\n"),n=new Blob([l],{type:"text/csv"}),t=URL.createObjectURL(n),r=document.createElement("a");r.href=t,r.download="logs-".concat((new Date).toISOString().split("T")[0],".csv"),r.click()}},S=m.slice(50*(g-1),50*g),A=Math.ceil(m.length/50),M={total:m.length,errors:m.filter(e=>"error"===e.level).length,warnings:m.filter(e=>"warning"===e.level).length,info:m.filter(e=>"info"===e.level).length},I=[{path:"/dashboard/it",label:e("dashboard"),icon:"\ud83d\udcca"},{path:"/dashboard/it/monitoring",label:"Monitoring",icon:"\ud83d\udce1"},{path:"/dashboard/it/logs",label:"Logi",icon:"\ud83d\udccb"},{path:"/dashboard/it/infrastructure",label:e("infrastructure"),icon:"\ud83d\udda5\ufe0f"},{path:"/dashboard/it/security",label:e("security"),icon:"\ud83d\udd12"}];return s?(0,o.jsx)(r.A,{title:"Logi systemowe",menuItems:I,children:(0,o.jsx)(c.A,{})}):(0,o.jsx)(r.A,{title:"Logi systemowe",menuItems:I,children:(0,o.jsxs)("div",{className:"it-logs",children:[(0,o.jsxs)("div",{className:"logs-stats",children:[(0,o.jsxs)("div",{className:"stat-item",children:[(0,o.jsx)("span",{className:"stat-value",children:M.total}),(0,o.jsx)("span",{className:"stat-label",children:"Wszystkie"})]}),(0,o.jsxs)("div",{className:"stat-item stat-error",children:[(0,o.jsx)("span",{className:"stat-value",children:M.errors}),(0,o.jsx)("span",{className:"stat-label",children:"B\u0142\u0119dy"})]}),(0,o.jsxs)("div",{className:"stat-item stat-warning",children:[(0,o.jsx)("span",{className:"stat-value",children:M.warnings}),(0,o.jsx)("span",{className:"stat-label",children:"Ostrze\u017cenia"})]}),(0,o.jsxs)("div",{className:"stat-item stat-info",children:[(0,o.jsx)("span",{className:"stat-value",children:M.info}),(0,o.jsx)("span",{className:"stat-label",children:"Info"})]})]}),(0,o.jsxs)(i.A,{className:"filters-card",children:[(0,o.jsxs)("div",{className:"filters-grid",children:[(0,o.jsxs)("div",{className:"filter-group",children:[(0,o.jsx)("label",{children:"Poziom"}),(0,o.jsx)("select",{value:v.level,onChange:e=>u((0,l.A)((0,l.A)({},v),{},{level:e.target.value})),children:[{value:"all",label:"Wszystkie"},{value:"error",label:"Error"},{value:"warning",label:"Warning"},{value:"info",label:"Info"},{value:"debug",label:"Debug"}].map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,o.jsxs)("div",{className:"filter-group",children:[(0,o.jsx)("label",{children:"Serwis"}),(0,o.jsxs)("select",{value:v.service,onChange:e=>u((0,l.A)((0,l.A)({},v),{},{service:e.target.value})),children:[(0,o.jsx)("option",{value:"all",children:"Wszystkie"}),N.map(e=>(0,o.jsx)("option",{value:e,children:e},e))]})]}),(0,o.jsxs)("div",{className:"filter-group",children:[(0,o.jsx)("label",{children:"Szukaj"}),(0,o.jsx)("input",{type:"text",placeholder:"Szukaj...",value:v.search,onChange:e=>u((0,l.A)((0,l.A)({},v),{},{search:e.target.value}))})]})]}),(0,o.jsxs)("div",{className:"filters-actions",children:[(0,o.jsx)("button",{className:"btn-secondary",onClick:()=>u({level:"all",service:"all",search:""}),children:"Wyczy\u015b\u0107"}),(0,o.jsxs)("label",{className:"auto-refresh-toggle",children:[(0,o.jsx)("input",{type:"checkbox",checked:j,onChange:e=>p(e.target.checked)}),"Auto-refresh"]}),(0,o.jsxs)("div",{className:"export-buttons",children:[(0,o.jsx)("button",{className:"btn-export",onClick:()=>C("json"),children:"\ud83d\udce5 JSON"}),(0,o.jsx)("button",{className:"btn-export",onClick:()=>C("csv"),children:"\ud83d\udce5 CSV"})]})]})]}),(0,o.jsxs)(i.A,{className:"logs-card",children:[(0,o.jsxs)("table",{className:"logs-table",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Czas"}),(0,o.jsx)("th",{children:"Poziom"}),(0,o.jsx)("th",{children:"Serwis"}),(0,o.jsx)("th",{children:"Wiadomo\u015b\u0107"}),(0,o.jsx)("th",{children:"Szczeg\xf3\u0142y"})]})}),(0,o.jsx)("tbody",{children:S.map(e=>{return(0,o.jsxs)("tr",{className:"log-row level-".concat(e.level),children:[(0,o.jsx)("td",{className:"log-timestamp",children:(s=e.timestamp,new Date(s).toLocaleString("pl-PL"))}),(0,o.jsx)("td",{children:(0,o.jsx)(w,{level:e.level})}),(0,o.jsx)("td",{className:"log-service",children:e.service}),(0,o.jsx)("td",{className:"log-message",children:e.message}),(0,o.jsxs)("td",{className:"log-details",children:[e.userId&&(0,o.jsxs)("span",{className:"detail-tag",children:["\ud83d\udc64 ",e.userId]}),e.ip&&(0,o.jsxs)("span",{className:"detail-tag",children:["\ud83c\udf10 ",e.ip]})]})]},e.id);var s})})]}),A>1&&(0,o.jsxs)("div",{className:"pagination",children:[(0,o.jsx)("button",{disabled:1===g,onClick:()=>b(g-1),children:"\u2190 Poprzednia"}),(0,o.jsxs)("span",{children:["Strona ",g," z ",A]}),(0,o.jsx)("button",{disabled:g===A,onClick:()=>b(g+1),children:"Nast\u0119pna \u2192"})]})]})]})})}},6257(e,s,a){a.d(s,{A:()=>c});var l=a(2555),n=a(3986),t=(a(5043),a(579));const r=["children","title","subtitle","icon","actions","variant","hoverable","clickable","onClick","className"];function i(e){let{children:s,title:a,subtitle:i,icon:c,actions:o,variant:d="default",hoverable:h=!1,clickable:m=!1,onClick:x,className:v=""}=e,u=(0,n.A)(e,r);const j=["card","card-".concat(d),h&&"card-hoverable",m&&"card-clickable",v].filter(Boolean).join(" "),p=m?"button":"div";return(0,t.jsxs)(p,(0,l.A)((0,l.A)({className:j,onClick:m?x:void 0},u),{},{children:[(a||c||o)&&(0,t.jsxs)("div",{className:"card-header",children:[(0,t.jsxs)("div",{className:"card-header-content",children:[c&&(0,t.jsx)("span",{className:"card-icon",children:c}),(0,t.jsxs)("div",{className:"card-titles",children:[a&&(0,t.jsx)("h3",{className:"card-title",children:a}),i&&(0,t.jsx)("p",{className:"card-subtitle",children:i})]})]}),o&&(0,t.jsx)("div",{className:"card-actions",children:o})]}),(0,t.jsx)("div",{className:"card-body",children:s})]}))}i.Footer=function(e){let{children:s,className:a=""}=e;return(0,t.jsx)("div",{className:"card-footer ".concat(a),children:s})};const c=i},6776(e,s,a){a.d(s,{A:()=>h});var l=a(5043),n=a(3216),t=a(5475),r=a(4117),i=a(5452),c=a(5114),o=a(477),d=a(579);const h=function(e){var s,a;let{children:h,menuItems:m,title:x,roleColor:v="var(--color-primary)"}=e;const{t:u}=(0,r.Bd)(),j=(0,n.Zp)(),{user:p,logout:g}=(0,i.As)(),{unreadCount:b}=(0,c.hN)(),{toggleLanguage:f,languageInfo:N}=(0,o.ok)(),[y,k]=(0,l.useState)(!0),[w,C]=(0,l.useState)(!1),S=async()=>{await g(),j("/login")};return(0,d.jsxs)("div",{className:"dashboard-layout ".concat(y?"":"sidebar-collapsed"),children:[(0,d.jsxs)("aside",{className:"dashboard-sidebar",style:{"--role-color":v},children:[(0,d.jsxs)("div",{className:"sidebar-header",children:[(0,d.jsxs)(t.N_,{to:"/",className:"sidebar-logo",children:[(0,d.jsx)("span",{className:"logo-icon",children:"\ud83d\udc3e"}),y&&(0,d.jsx)("span",{className:"logo-text",children:u("common.appName")})]}),(0,d.jsx)("button",{className:"sidebar-toggle",onClick:()=>k(!y),"aria-label":y?"Zwi\u0144 menu":"Rozwi\u0144 menu",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:y?(0,d.jsx)("polyline",{points:"11 17 6 12 11 7"}):(0,d.jsx)("polyline",{points:"9 17 14 12 9 7"})})})]}),(0,d.jsx)("nav",{className:"sidebar-nav",children:(0,d.jsx)("ul",{className:"nav-list",children:m.map((e,s)=>(0,d.jsx)("li",{className:"nav-item",children:(0,d.jsxs)(t.k2,{to:e.path,className:e=>{let{isActive:s}=e;return"nav-link ".concat(s?"active":"")},end:e.exact,children:[(0,d.jsx)("span",{className:"nav-icon",children:e.icon}),y&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{className:"nav-label",children:e.label}),e.badge&&(0,d.jsx)("span",{className:"nav-badge",children:e.badge})]})]})},s))})}),(0,d.jsx)("div",{className:"sidebar-footer",children:(0,d.jsxs)("button",{className:"logout-btn",onClick:S,children:[(0,d.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,d.jsx)("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),(0,d.jsx)("polyline",{points:"16 17 21 12 16 7"}),(0,d.jsx)("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),y&&(0,d.jsx)("span",{children:u("nav.logout")})]})})]}),(0,d.jsxs)("div",{className:"dashboard-main",children:[(0,d.jsxs)("header",{className:"dashboard-header",children:[(0,d.jsxs)("div",{className:"header-left",children:[(0,d.jsx)("button",{className:"mobile-menu-btn",onClick:()=>k(!y),children:(0,d.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,d.jsx)("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),(0,d.jsx)("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),(0,d.jsx)("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})}),(0,d.jsx)("h1",{className:"header-title",children:x})]}),(0,d.jsxs)("div",{className:"header-right",children:[(0,d.jsx)("button",{className:"header-btn lang-btn",onClick:f,"aria-label":"Zmie\u0144 j\u0119zyk",children:N.flag}),(0,d.jsxs)("button",{className:"header-btn notification-btn",children:[(0,d.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,d.jsx)("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),(0,d.jsx)("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]}),b>0&&(0,d.jsx)("span",{className:"notification-badge",children:b})]}),(0,d.jsxs)("div",{className:"user-menu-container",children:[(0,d.jsxs)("button",{className:"user-menu-trigger",onClick:()=>C(!w),children:[(0,d.jsxs)("div",{className:"user-avatar",children:[null===p||void 0===p||null===(s=p.firstName)||void 0===s?void 0:s[0],null===p||void 0===p||null===(a=p.lastName)||void 0===a?void 0:a[0]]}),(0,d.jsxs)("div",{className:"user-info",children:[(0,d.jsxs)("span",{className:"user-name",children:[null===p||void 0===p?void 0:p.firstName," ",null===p||void 0===p?void 0:p.lastName]}),(0,d.jsx)("span",{className:"user-role",children:u("auth.login.roles.".concat(null===p||void 0===p?void 0:p.role))})]}),(0,d.jsx)("svg",{className:"user-arrow",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,d.jsx)("polyline",{points:"6 9 12 15 18 9"})})]}),w&&(0,d.jsxs)("div",{className:"user-menu-dropdown",children:[(0,d.jsxs)("button",{className:"dropdown-item",children:[(0,d.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,d.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),(0,d.jsx)("circle",{cx:"12",cy:"7",r:"4"})]}),"M\xf3j profil"]}),(0,d.jsxs)("button",{className:"dropdown-item",children:[(0,d.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,d.jsx)("circle",{cx:"12",cy:"12",r:"3"}),(0,d.jsx)("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),"Ustawienia"]}),(0,d.jsx)("div",{className:"dropdown-divider"}),(0,d.jsxs)("button",{className:"dropdown-item logout",onClick:S,children:[(0,d.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,d.jsx)("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),(0,d.jsx)("polyline",{points:"16 17 21 12 16 7"}),(0,d.jsx)("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),u("nav.logout")]})]})]})]})]}),(0,d.jsx)("main",{className:"dashboard-content",children:h})]}),y&&(0,d.jsx)("div",{className:"sidebar-overlay",onClick:()=>k(!1)})]})}}}]);
//# sourceMappingURL=51.0ed4c457.chunk.js.map