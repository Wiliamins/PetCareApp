"use strict";(self.webpackChunkpetcareapp_frontend=self.webpackChunkpetcareapp_frontend||[]).push([[421],{1282(e,a,s){s.r(a),s.d(a,{default:()=>u});var t=s(2555),i=s(5043),l=s(4117),r=s(6776),n=s(6257),c=s(2318),o=s(4793),d=s(6481),h=s(5114),m=s(7445),p=(s(7772),s(9787),s(579));const u=function(){const{t:e}=(0,l.Bd)(),{showNotification:a}=(0,h.hN)(),[s,u]=(0,i.useState)([]),[b,x]=(0,i.useState)(!0),[j,v]=(0,i.useState)(!1),[g,N]=(0,i.useState)(null),[w,f]=(0,i.useState)(null),[C,y]=(0,i.useState)("all"),[k,A]=(0,i.useState)(""),[D,P]=(0,i.useState)({name:"",species:"dog",breed:"",birthDate:"",gender:"male",weight:"",color:"",microchipNumber:"",notes:""}),[S,z]=(0,i.useState)({}),q=[{path:"/dashboard/client",label:e("dashboard.client.overview"),icon:"\ud83d\udcca",exact:!0},{path:"/dashboard/client/pets",label:e("dashboard.client.pets"),icon:"\ud83d\udc3e"},{path:"/dashboard/client/appointments",label:e("dashboard.client.appointments"),icon:"\ud83d\udcc5"},{path:"/dashboard/client/notifications",label:e("dashboard.client.notifications"),icon:"\ud83d\udd14"},{path:"/dashboard/client/payments",label:e("dashboard.client.payments"),icon:"\ud83d\udcb3"},{path:"/dashboard/client/contact",label:e("dashboard.client.contact"),icon:"\u2709\ufe0f"}];(0,i.useEffect)(()=>{L()},[]);const L=async()=>{try{x(!0);const e=await m.A.getMyPets();u(e.data||[])}catch(e){console.error("Error fetching pets:",e),u([{id:"1",name:"Burek",species:"dog",breed:"Labrador",birthDate:"2021-03-15",gender:"male",weight:32,color:"Z\u0142oty",microchipNumber:"123456789012345",notes:"Bardzo przyjazny"},{id:"2",name:"Mruczka",species:"cat",breed:"Perski",birthDate:"2019-07-20",gender:"female",weight:4.5,color:"Bia\u0142y",microchipNumber:"987654321098765",notes:"Lubi spa\u0107"},{id:"3",name:"Reksio",species:"dog",breed:"Owczarek niemiecki",birthDate:"2020-01-10",gender:"male",weight:38,color:"Czarno-br\u0105zowy",microchipNumber:"",notes:""}])}finally{x(!1)}},F=e=>{const{name:a,value:s}=e.target;P(e=>(0,t.A)((0,t.A)({},e),{},{[a]:s})),S[a]&&z(e=>(0,t.A)((0,t.A)({},e),{},{[a]:""}))},B=()=>{N(null),P({name:"",species:"dog",breed:"",birthDate:"",gender:"male",weight:"",color:"",microchipNumber:"",notes:""}),z({}),v(!0)},M=()=>{v(!1),N(null),z({})},I=s.filter(e=>{const a="all"===C||e.species===C,s=e.name.toLowerCase().includes(k.toLowerCase())||e.breed.toLowerCase().includes(k.toLowerCase());return a&&s}),K=e=>{if(!e)return"-";const a=new Date(e),s=new Date,t=s.getFullYear()-a.getFullYear(),i=s.getMonth()-a.getMonth();return 0===t?"".concat(i," mies."):1===t?"1 rok":"".concat(t,t<5?" lata":" lat")};return b?(0,p.jsx)(r.A,{menuItems:q,title:e("pets.title"),roleColor:"#2d7a5e",children:(0,p.jsx)(d.A,{})}):(0,p.jsx)(r.A,{menuItems:q,title:e("pets.title"),roleColor:"#2d7a5e",children:(0,p.jsxs)("div",{className:"dashboard-page",children:[(0,p.jsxs)("div",{className:"page-header",children:[(0,p.jsxs)("div",{className:"search-filter-row",children:[(0,p.jsx)(o.A,{type:"text",placeholder:e("common.search"),value:k,onChange:e=>A(e.target.value),icon:"\ud83d\udd0d",className:"search-input"}),(0,p.jsxs)("div",{className:"filter-buttons",children:[(0,p.jsx)("button",{className:"filter-btn ".concat("all"===C?"active":""),onClick:()=>y("all"),children:"Wszystkie"}),(0,p.jsx)("button",{className:"filter-btn ".concat("dog"===C?"active":""),onClick:()=>y("dog"),children:"\ud83d\udc15 Psy"}),(0,p.jsx)("button",{className:"filter-btn ".concat("cat"===C?"active":""),onClick:()=>y("cat"),children:"\ud83d\udc31 Koty"})]})]}),(0,p.jsxs)(c.A,{onClick:B,children:["+ ",e("pets.addPet")]})]}),0===I.length?(0,p.jsx)(n.A,{className:"empty-state-card",children:(0,p.jsxs)("div",{className:"empty-state",children:[(0,p.jsx)("span",{className:"empty-icon",children:"\ud83d\udc3e"}),(0,p.jsx)("h3",{children:e("pets.noPets")}),(0,p.jsx)("p",{children:e("pets.addFirstPet")}),(0,p.jsx)(c.A,{onClick:B,children:e("pets.addPet")})]})}):(0,p.jsx)("div",{className:"pets-grid",children:I.map(a=>{return(0,p.jsxs)(n.A,{className:"pet-card",hoverable:!0,children:[(0,p.jsxs)("div",{className:"pet-card-header",children:[(0,p.jsx)("div",{className:"pet-avatar-large",children:(s=a.species,{dog:"\ud83d\udc15",cat:"\ud83d\udc31",bird:"\ud83d\udc26",rabbit:"\ud83d\udc30",hamster:"\ud83d\udc39",fish:"\ud83d\udc1f",other:"\ud83d\udc3e"}[s]||"\ud83d\udc3e")}),(0,p.jsxs)("div",{className:"pet-header-info",children:[(0,p.jsx)("h3",{className:"pet-name",children:a.name}),(0,p.jsx)("p",{className:"pet-breed",children:a.breed})]}),(0,p.jsxs)("div",{className:"pet-actions-dropdown",children:[(0,p.jsx)("button",{className:"dropdown-trigger",children:"\u22ee"}),(0,p.jsxs)("div",{className:"dropdown-menu",children:[(0,p.jsxs)("button",{onClick:()=>(e=>{var a;N(e),P({name:e.name||"",species:e.species||"dog",breed:e.breed||"",birthDate:e.birthDate||"",gender:e.gender||"male",weight:(null===(a=e.weight)||void 0===a?void 0:a.toString())||"",color:e.color||"",microchipNumber:e.microchipNumber||"",notes:e.notes||""}),z({}),v(!0)})(a),children:["\u270f\ufe0f ",e("common.edit")]}),(0,p.jsxs)("button",{className:"danger",onClick:()=>f(a.id),children:["\ud83d\uddd1\ufe0f ",e("common.delete")]})]})]})]}),(0,p.jsxs)("div",{className:"pet-details-grid",children:[(0,p.jsxs)("div",{className:"pet-detail",children:[(0,p.jsx)("span",{className:"detail-label",children:e("pets.age")}),(0,p.jsx)("span",{className:"detail-value",children:K(a.birthDate)})]}),(0,p.jsxs)("div",{className:"pet-detail",children:[(0,p.jsx)("span",{className:"detail-label",children:e("pets.gender")}),(0,p.jsx)("span",{className:"detail-value",children:"male"===a.gender?"\u2642\ufe0f Samiec":"\u2640\ufe0f Samica"})]}),(0,p.jsxs)("div",{className:"pet-detail",children:[(0,p.jsx)("span",{className:"detail-label",children:e("pets.weight")}),(0,p.jsx)("span",{className:"detail-value",children:a.weight?"".concat(a.weight," kg"):"-"})]}),(0,p.jsxs)("div",{className:"pet-detail",children:[(0,p.jsx)("span",{className:"detail-label",children:e("pets.color")}),(0,p.jsx)("span",{className:"detail-value",children:a.color||"-"})]})]}),a.microchipNumber&&(0,p.jsxs)("div",{className:"pet-microchip",children:[(0,p.jsx)("span",{className:"microchip-icon",children:"\ud83d\udcdf"}),(0,p.jsx)("span",{className:"microchip-number",children:a.microchipNumber})]}),(0,p.jsxs)("div",{className:"pet-card-footer",children:[(0,p.jsx)(c.A,{variant:"outline",size:"small",children:"\ud83d\udccb Historia medyczna"}),(0,p.jsx)(c.A,{variant:"ghost",size:"small",children:"\ud83d\udcc5 Um\xf3w wizyt\u0119"})]})]},a.id);var s})}),j&&(0,p.jsx)("div",{className:"modal-overlay",onClick:M,children:(0,p.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,p.jsxs)("div",{className:"modal-header",children:[(0,p.jsx)("h2",{children:e(g?"pets.editPet":"pets.addPet")}),(0,p.jsx)("button",{className:"modal-close",onClick:M,children:"\xd7"})]}),(0,p.jsxs)("form",{onSubmit:async s=>{if(s.preventDefault(),(()=>{const a={};D.name.trim()?D.name.length<2&&(a.name=e("validation.minLength",{min:2})):a.name=e("validation.required"),D.species||(a.species=e("validation.required")),D.breed.trim()||(a.breed=e("validation.required")),D.birthDate?new Date(D.birthDate)>new Date&&(a.birthDate=e("validation.futureDateNotAllowed")):a.birthDate=e("validation.required");return D.weight&&(isNaN(D.weight)||parseFloat(D.weight)<=0)&&(a.weight=e("validation.positiveNumber")),D.microchipNumber&&!/^\d{15}$/.test(D.microchipNumber)&&(a.microchipNumber=e("validation.microchipFormat")),z(a),0===Object.keys(a).length})())try{if(g)await m.A.updatePet(g.id,D),u(e=>e.map(e=>e.id===g.id?(0,t.A)((0,t.A)({},e),D):e)),a(e("pets.updated"),"success");else{const s=(await m.A.createPet(D)).data||(0,t.A)({id:Date.now().toString()},D);u(e=>[...e,s]),a(e("pets.added"),"success")}M()}catch(i){a(e("common.error"),"error")}else a(e("validation.checkForm"),"error")},className:"pet-form",children:[(0,p.jsxs)("div",{className:"form-grid",children:[(0,p.jsx)(o.A,{label:e("pets.name"),name:"name",value:D.name,onChange:F,error:S.name,required:!0}),(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsxs)("label",{children:[e("pets.species")," *"]}),(0,p.jsxs)("select",{name:"species",value:D.species,onChange:F,className:S.species?"error":"",children:[(0,p.jsx)("option",{value:"dog",children:"\ud83d\udc15 Pies"}),(0,p.jsx)("option",{value:"cat",children:"\ud83d\udc31 Kot"}),(0,p.jsx)("option",{value:"bird",children:"\ud83d\udc26 Ptak"}),(0,p.jsx)("option",{value:"rabbit",children:"\ud83d\udc30 Kr\xf3lik"}),(0,p.jsx)("option",{value:"hamster",children:"\ud83d\udc39 Chomik"}),(0,p.jsx)("option",{value:"fish",children:"\ud83d\udc1f Ryba"}),(0,p.jsx)("option",{value:"other",children:"\ud83d\udc3e Inny"})]}),S.species&&(0,p.jsx)("span",{className:"error-text",children:S.species})]}),(0,p.jsx)(o.A,{label:e("pets.breed"),name:"breed",value:D.breed,onChange:F,error:S.breed,required:!0}),(0,p.jsx)(o.A,{label:e("pets.birthDate"),name:"birthDate",type:"date",value:D.birthDate,onChange:F,error:S.birthDate,required:!0}),(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{children:e("pets.gender")}),(0,p.jsxs)("select",{name:"gender",value:D.gender,onChange:F,children:[(0,p.jsx)("option",{value:"male",children:"\u2642\ufe0f Samiec"}),(0,p.jsx)("option",{value:"female",children:"\u2640\ufe0f Samica"})]})]}),(0,p.jsx)(o.A,{label:e("pets.weight"),name:"weight",type:"number",step:"0.1",value:D.weight,onChange:F,error:S.weight,placeholder:"kg"}),(0,p.jsx)(o.A,{label:e("pets.color"),name:"color",value:D.color,onChange:F}),(0,p.jsx)(o.A,{label:e("pets.microchip"),name:"microchipNumber",value:D.microchipNumber,onChange:F,error:S.microchipNumber,placeholder:"15 cyfr"})]}),(0,p.jsxs)("div",{className:"form-group full-width",children:[(0,p.jsx)("label",{children:e("pets.notes")}),(0,p.jsx)("textarea",{name:"notes",value:D.notes,onChange:F,rows:3,placeholder:e("pets.notesPlaceholder")})]}),(0,p.jsxs)("div",{className:"modal-footer",children:[(0,p.jsx)(c.A,{variant:"ghost",type:"button",onClick:M,children:e("common.cancel")}),(0,p.jsx)(c.A,{type:"submit",children:e(g?"common.save":"pets.addPet")})]})]})]})}),w&&(0,p.jsx)("div",{className:"modal-overlay",onClick:()=>f(null),children:(0,p.jsxs)("div",{className:"modal-content modal-small",onClick:e=>e.stopPropagation(),children:[(0,p.jsx)("div",{className:"modal-header",children:(0,p.jsx)("h2",{children:e("pets.deleteConfirm")})}),(0,p.jsx)("div",{className:"modal-body",children:(0,p.jsx)("p",{children:e("pets.deleteWarning")})}),(0,p.jsxs)("div",{className:"modal-footer",children:[(0,p.jsx)(c.A,{variant:"ghost",onClick:()=>f(null),children:e("common.cancel")}),(0,p.jsx)(c.A,{variant:"danger",onClick:()=>(async s=>{try{await m.A.deletePet(s),u(e=>e.filter(e=>e.id!==s)),a(e("pets.deleted"),"success"),f(null)}catch(t){a(e("common.error"),"error")}})(w),children:e("common.delete")})]})]})})]})})}}}]);
//# sourceMappingURL=421.ed879cac.chunk.js.map