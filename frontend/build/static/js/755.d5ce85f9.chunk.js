"use strict";(self.webpackChunkpetcareapp_frontend=self.webpackChunkpetcareapp_frontend||[]).push([[755],{2318(a,e,s){s.d(e,{A:()=>c});var i=s(2555),n=s(3986),t=(s(5043),s(579));const l=["children","variant","size","fullWidth","loading","disabled","type","icon","iconPosition","onClick","className"];const c=function(a){let{children:e,variant:s="primary",size:c="medium",fullWidth:o=!1,loading:r=!1,disabled:d=!1,type:h="button",icon:m=null,iconPosition:u="left",onClick:x,className:p=""}=a,j=(0,n.A)(a,l);const v=["btn","btn-".concat(s),"btn-".concat(c),o&&"btn-full",r&&"btn-loading",m&&!e&&"btn-icon-only",p].filter(Boolean).join(" ");return(0,t.jsxs)("button",(0,i.A)((0,i.A)({type:h,className:v,onClick:x,disabled:d||r},j),{},{children:[r&&(0,t.jsx)("span",{className:"btn-spinner","aria-hidden":"true"}),!r&&m&&"left"===u&&(0,t.jsx)("span",{className:"btn-icon btn-icon-left",children:m}),e&&(0,t.jsx)("span",{className:"btn-text",children:e}),!r&&m&&"right"===u&&(0,t.jsx)("span",{className:"btn-icon btn-icon-right",children:m})]}))}},3986(a,e,s){function i(a,e){if(null==a)return{};var s,i,n=function(a,e){if(null==a)return{};var s={};for(var i in a)if({}.hasOwnProperty.call(a,i)){if(-1!==e.indexOf(i))continue;s[i]=a[i]}return s}(a,e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(a);for(i=0;i<t.length;i++)s=t[i],-1===e.indexOf(s)&&{}.propertyIsEnumerable.call(a,s)&&(n[s]=a[s])}return n}s.d(e,{A:()=>i})},6257(a,e,s){s.d(e,{A:()=>o});var i=s(2555),n=s(3986),t=(s(5043),s(579));const l=["children","title","subtitle","icon","actions","variant","hoverable","clickable","onClick","className"];function c(a){let{children:e,title:s,subtitle:c,icon:o,actions:r,variant:d="default",hoverable:h=!1,clickable:m=!1,onClick:u,className:x=""}=a,p=(0,n.A)(a,l);const j=["card","card-".concat(d),h&&"card-hoverable",m&&"card-clickable",x].filter(Boolean).join(" "),v=m?"button":"div";return(0,t.jsxs)(v,(0,i.A)((0,i.A)({className:j,onClick:m?u:void 0},p),{},{children:[(s||o||r)&&(0,t.jsxs)("div",{className:"card-header",children:[(0,t.jsxs)("div",{className:"card-header-content",children:[o&&(0,t.jsx)("span",{className:"card-icon",children:o}),(0,t.jsxs)("div",{className:"card-titles",children:[s&&(0,t.jsx)("h3",{className:"card-title",children:s}),c&&(0,t.jsx)("p",{className:"card-subtitle",children:c})]})]}),r&&(0,t.jsx)("div",{className:"card-actions",children:r})]}),(0,t.jsx)("div",{className:"card-body",children:e})]}))}c.Footer=function(a){let{children:e,className:s=""}=a;return(0,t.jsx)("div",{className:"card-footer ".concat(s),children:e})};const o=c},6776(a,e,s){s.d(e,{A:()=>h});var i=s(5043),n=s(3216),t=s(5475),l=s(4117),c=s(5452),o=s(5114),r=s(477),d=s(579);const h=function(a){var e,s;let{children:h,menuItems:m,title:u,roleColor:x="var(--color-primary)"}=a;const{t:p}=(0,l.Bd)(),j=(0,n.Zp)(),{user:v,logout:b}=(0,c.As)(),{unreadCount:N}=(0,o.hN)(),{toggleLanguage:f,languageInfo:y}=(0,r.ok)(),[g,k]=(0,i.useState)(!0),[w,C]=(0,i.useState)(!1),A=async()=>{await b(),j("/login")};return(0,d.jsxs)("div",{className:"dashboard-layout ".concat(g?"":"sidebar-collapsed"),children:[(0,d.jsxs)("aside",{className:"dashboard-sidebar",style:{"--role-color":x},children:[(0,d.jsxs)("div",{className:"sidebar-header",children:[(0,d.jsxs)(t.N_,{to:"/",className:"sidebar-logo",children:[(0,d.jsx)("span",{className:"logo-icon",children:"\ud83d\udc3e"}),g&&(0,d.jsx)("span",{className:"logo-text",children:p("common.appName")})]}),(0,d.jsx)("button",{className:"sidebar-toggle",onClick:()=>k(!g),"aria-label":g?"Zwi\u0144 menu":"Rozwi\u0144 menu",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:g?(0,d.jsx)("polyline",{points:"11 17 6 12 11 7"}):(0,d.jsx)("polyline",{points:"9 17 14 12 9 7"})})})]}),(0,d.jsx)("nav",{className:"sidebar-nav",children:(0,d.jsx)("ul",{className:"nav-list",children:m.map((a,e)=>(0,d.jsx)("li",{className:"nav-item",children:(0,d.jsxs)(t.k2,{to:a.path,className:a=>{let{isActive:e}=a;return"nav-link ".concat(e?"active":"")},end:a.exact,children:[(0,d.jsx)("span",{className:"nav-icon",children:a.icon}),g&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{className:"nav-label",children:a.label}),a.badge&&(0,d.jsx)("span",{className:"nav-badge",children:a.badge})]})]})},e))})}),(0,d.jsx)("div",{className:"sidebar-footer",children:(0,d.jsxs)("button",{className:"logout-btn",onClick:A,children:[(0,d.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,d.jsx)("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),(0,d.jsx)("polyline",{points:"16 17 21 12 16 7"}),(0,d.jsx)("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),g&&(0,d.jsx)("span",{children:p("nav.logout")})]})})]}),(0,d.jsxs)("div",{className:"dashboard-main",children:[(0,d.jsxs)("header",{className:"dashboard-header",children:[(0,d.jsxs)("div",{className:"header-left",children:[(0,d.jsx)("button",{className:"mobile-menu-btn",onClick:()=>k(!g),children:(0,d.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,d.jsx)("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),(0,d.jsx)("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),(0,d.jsx)("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})}),(0,d.jsx)("h1",{className:"header-title",children:u})]}),(0,d.jsxs)("div",{className:"header-right",children:[(0,d.jsx)("button",{className:"header-btn lang-btn",onClick:f,"aria-label":"Zmie\u0144 j\u0119zyk",children:y.flag}),(0,d.jsxs)("button",{className:"header-btn notification-btn",children:[(0,d.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,d.jsx)("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),(0,d.jsx)("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]}),N>0&&(0,d.jsx)("span",{className:"notification-badge",children:N})]}),(0,d.jsxs)("div",{className:"user-menu-container",children:[(0,d.jsxs)("button",{className:"user-menu-trigger",onClick:()=>C(!w),children:[(0,d.jsxs)("div",{className:"user-avatar",children:[null===v||void 0===v||null===(e=v.firstName)||void 0===e?void 0:e[0],null===v||void 0===v||null===(s=v.lastName)||void 0===s?void 0:s[0]]}),(0,d.jsxs)("div",{className:"user-info",children:[(0,d.jsxs)("span",{className:"user-name",children:[null===v||void 0===v?void 0:v.firstName," ",null===v||void 0===v?void 0:v.lastName]}),(0,d.jsx)("span",{className:"user-role",children:p("auth.login.roles.".concat(null===v||void 0===v?void 0:v.role))})]}),(0,d.jsx)("svg",{className:"user-arrow",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,d.jsx)("polyline",{points:"6 9 12 15 18 9"})})]}),w&&(0,d.jsxs)("div",{className:"user-menu-dropdown",children:[(0,d.jsxs)("button",{className:"dropdown-item",children:[(0,d.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,d.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),(0,d.jsx)("circle",{cx:"12",cy:"7",r:"4"})]}),"M\xf3j profil"]}),(0,d.jsxs)("button",{className:"dropdown-item",children:[(0,d.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,d.jsx)("circle",{cx:"12",cy:"12",r:"3"}),(0,d.jsx)("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),"Ustawienia"]}),(0,d.jsx)("div",{className:"dropdown-divider"}),(0,d.jsxs)("button",{className:"dropdown-item logout",onClick:A,children:[(0,d.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,d.jsx)("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),(0,d.jsx)("polyline",{points:"16 17 21 12 16 7"}),(0,d.jsx)("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),p("nav.logout")]})]})]})]})]}),(0,d.jsx)("main",{className:"dashboard-content",children:h})]}),g&&(0,d.jsx)("div",{className:"sidebar-overlay",onClick:()=>k(!1)})]})}},7755(a,e,s){s.r(e),s.d(e,{default:()=>p});var i=s(2555),n=s(5043),t=s(4117),l=s(6776),c=s(6257),o=s(2318),r=s(6481),d=s(5114),h=s(6305);const m={async getNotifications(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await h.OT.get("/notifications",{params:a})).data},getUnreadCount:async()=>(await h.OT.get("/notifications/unread-count")).data.count,async markAsRead(a){await h.OT.post("/notifications/".concat(a,"/read"))},async markAllAsRead(){await h.OT.post("/notifications/read-all")},async deleteNotification(a){await h.OT.delete("/notifications/".concat(a))},getSettings:async()=>(await h.OT.get("/notifications/settings")).data,updateSettings:async a=>(await h.OT.put("/notifications/settings",a)).data,async subscribePush(a){await h.OT.post("/notifications/push/subscribe",a)},async unsubscribePush(){await h.OT.post("/notifications/push/unsubscribe")},sendNotification:async a=>(await h.OT.post("/notifications/send",a)).data,broadcastNotification:async a=>(await h.OT.post("/notifications/broadcast",a)).data},u=m;s(7772),s(9787);var x=s(579);const p=function(){const{t:a}=(0,t.Bd)(),{showNotification:e}=(0,d.hN)(),[s,h]=(0,n.useState)([]),[m,p]=(0,n.useState)(!0),[j,v]=(0,n.useState)("all"),[b,N]=(0,n.useState)(null),[f,y]=(0,n.useState)(!1),[g,k]=(0,n.useState)({email:!0,push:!0,sms:!1,appointmentReminders:!0,vaccinationReminders:!0,paymentReminders:!0,promotions:!1}),w=[{path:"/dashboard/client",label:a("dashboard.client.overview"),icon:"\ud83d\udcca",exact:!0},{path:"/dashboard/client/pets",label:a("dashboard.client.pets"),icon:"\ud83d\udc3e"},{path:"/dashboard/client/appointments",label:a("dashboard.client.appointments"),icon:"\ud83d\udcc5"},{path:"/dashboard/client/notifications",label:a("dashboard.client.notifications"),icon:"\ud83d\udd14"},{path:"/dashboard/client/payments",label:a("dashboard.client.payments"),icon:"\ud83d\udcb3"},{path:"/dashboard/client/contact",label:a("dashboard.client.contact"),icon:"\u2709\ufe0f"}];(0,n.useEffect)(()=>{C()},[]);const C=async()=>{try{p(!0);const a=await u.getNotifications();h(a.data||[])}catch(a){h([{id:"1",type:"appointment",title:"Przypomnienie o wizycie",message:"Wizyta Burka u dr Kowalskiej jutro o 14:00.",date:"2024-12-19T10:00:00",read:!1},{id:"2",type:"vaccination",title:"Zbli\u017ca si\u0119 termin szczepienia",message:"Szczepienie Mruczki przeciw w\u015bciekli\u017anie za 7 dni.",date:"2024-12-18T14:30:00",read:!1},{id:"3",type:"payment",title:"Nowa faktura",message:"Faktura FV/2024/12/001 na kwot\u0119 150 z\u0142.",date:"2024-12-17T09:00:00",read:!0},{id:"4",type:"reminder",title:"Podanie leku",message:"Pami\u0119taj o antybiotyku dla Burka.",date:"2024-12-16T08:00:00",read:!0}])}finally{p(!1)}},A=a=>({appointment:"\ud83d\udcc5",vaccination:"\ud83d\udc89",payment:"\ud83d\udcb3",reminder:"\u23f0"}[a]||"\ud83d\udd14"),z=a=>{const e=Date.now()-new Date(a),s=Math.floor(e/6e4);return s<60?"".concat(s," min temu"):s<1440?"".concat(Math.floor(s/60)," godz. temu"):"".concat(Math.floor(s/1440)," dni temu")},O=s.filter(a=>"all"===j||("unread"===j?!a.read:a.type===j)),S=s.filter(a=>!a.read).length;return m?(0,x.jsx)(l.A,{menuItems:w,title:a("notifications.title"),roleColor:"#2d7a5e",children:(0,x.jsx)(r.A,{})}):(0,x.jsx)(l.A,{menuItems:w,title:a("notifications.title"),roleColor:"#2d7a5e",children:(0,x.jsxs)("div",{className:"dashboard-page",children:[(0,x.jsxs)("div",{className:"page-header",children:[(0,x.jsx)("div",{className:"filter-buttons",children:["all","unread","appointment","vaccination"].map(a=>(0,x.jsx)("button",{className:"filter-btn ".concat(j===a?"active":""),onClick:()=>v(a),children:"all"===a?"Wszystkie":"unread"===a?"Nieprzeczytane (".concat(S,")"):"appointment"===a?"\ud83d\udcc5 Wizyty":"\ud83d\udc89 Szczepienia"},a))}),(0,x.jsxs)("div",{style:{display:"flex",gap:"var(--space-2)"},children:[S>0&&(0,x.jsx)(o.A,{variant:"ghost",onClick:()=>{h(a=>a.map(a=>(0,i.A)((0,i.A)({},a),{},{read:!0}))),e("Oznaczono jako przeczytane","success")},children:"\u2713 Oznacz wszystkie"}),(0,x.jsx)(o.A,{variant:"outline",onClick:()=>y(!0),children:"\u2699\ufe0f Ustawienia"})]})]}),0===O.length?(0,x.jsx)(c.A,{className:"empty-state-card",children:(0,x.jsxs)("div",{className:"empty-state",children:[(0,x.jsx)("span",{className:"empty-icon",children:"\ud83d\udd14"}),(0,x.jsx)("h3",{children:"Brak powiadomie\u0144"})]})}):(0,x.jsx)(c.A,{children:(0,x.jsx)("div",{className:"notifications-list",children:O.map(a=>(0,x.jsxs)("div",{className:"notification-item-full ".concat(a.read?"":"unread"),onClick:()=>{N(a),a.read||(async a=>{h(e=>e.map(e=>e.id===a?(0,i.A)((0,i.A)({},e),{},{read:!0}):e))})(a.id)},children:[(0,x.jsx)("div",{className:"notification-icon-large type-".concat(a.type),children:A(a.type)}),(0,x.jsxs)("div",{className:"notification-content-full",children:[(0,x.jsx)("div",{className:"notification-title",children:a.title}),(0,x.jsxs)("div",{className:"notification-message",children:[a.message.substring(0,80),"..."]}),(0,x.jsx)("div",{className:"notification-time",children:z(a.date)})]}),!a.read&&(0,x.jsx)("div",{className:"unread-dot"})]},a.id))})}),b&&(0,x.jsx)("div",{className:"modal-overlay",onClick:()=>N(null),children:(0,x.jsxs)("div",{className:"modal-content",onClick:a=>a.stopPropagation(),children:[(0,x.jsxs)("div",{className:"modal-header",children:[(0,x.jsxs)("h2",{children:[A(b.type)," ",b.title]}),(0,x.jsx)("button",{className:"modal-close",onClick:()=>N(null),children:"\xd7"})]}),(0,x.jsxs)("div",{className:"modal-body",children:[(0,x.jsx)("p",{children:b.message}),(0,x.jsx)("p",{style:{color:"var(--text-muted)",marginTop:"var(--space-4)"},children:new Date(b.date).toLocaleString("pl")})]}),(0,x.jsxs)("div",{className:"modal-footer",children:[(0,x.jsx)(o.A,{variant:"ghost",onClick:()=>{return a=b.id,h(e=>e.filter(e=>e.id!==a)),N(null),void e("Usuni\u0119to","success");var a},children:"\ud83d\uddd1\ufe0f Usu\u0144"}),(0,x.jsx)(o.A,{onClick:()=>N(null),children:"Zamknij"})]})]})}),f&&(0,x.jsx)("div",{className:"modal-overlay",onClick:()=>y(!1),children:(0,x.jsxs)("div",{className:"modal-content",onClick:a=>a.stopPropagation(),children:[(0,x.jsxs)("div",{className:"modal-header",children:[(0,x.jsx)("h2",{children:"Ustawienia powiadomie\u0144"}),(0,x.jsx)("button",{className:"modal-close",onClick:()=>y(!1),children:"\xd7"})]}),(0,x.jsx)("div",{className:"modal-body",children:[{key:"email",label:"\ud83d\udce7 Email"},{key:"push",label:"\ud83d\udd14 Push"},{key:"sms",label:"\ud83d\udcf1 SMS"}].map(a=>(0,x.jsxs)("label",{style:{display:"flex",gap:"var(--space-3)",marginBottom:"var(--space-2)",cursor:"pointer"},children:[(0,x.jsx)("input",{type:"checkbox",checked:g[a.key],onChange:()=>k(e=>(0,i.A)((0,i.A)({},e),{},{[a.key]:!e[a.key]}))}),a.label]},a.key))}),(0,x.jsxs)("div",{className:"modal-footer",children:[(0,x.jsx)(o.A,{variant:"ghost",onClick:()=>y(!1),children:"Anuluj"}),(0,x.jsx)(o.A,{onClick:()=>{e("Zapisano","success"),y(!1)},children:"Zapisz"})]})]})})]})})}},7772(){},9787(){}}]);
//# sourceMappingURL=755.d5ce85f9.chunk.js.map